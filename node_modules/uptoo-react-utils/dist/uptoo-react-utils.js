!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("uptoo-react-utils",[],e):"object"==typeof exports?exports["uptoo-react-utils"]=e():t["uptoo-react-utils"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={set:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,r=new Date,o="expires="+r.toUTCString();return null!==this.get(t)&&this.delete(t),r.setTime(r.getTime()+24*n*60*60*1e3),document.cookie=t+"="+e+";"+o+";path=/",null},delete:function(t){return document.cookie=t+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0},get:function(t){var e="; "+document.cookie,n=e.split("; "+t+"=");return 2===n.length?n.pop().split(";").shift():null}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={API_DOMAIN:null,JWT_TOKEN:null,AUTHORIZED_USERS:[],STORE:null},i={get:function(t){return a[t]?a[t]:console.warn("[react-utils] : Configuration is not defined for : ",t)},set:function(t,e){a[t]=e},isSet:function(t){return"undefined"!==o(a[t])}};e.default=r({},i)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){return f||(f=new l(s.default)),f}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),u=r(i),c=n(0),s=r(c),l=function t(e){var r=this;o(this,t),this.execute=function(t,e){var o=t,a=e,i=u.default.get("STORE"),c=r.StorageManager.get(u.default.get("JWT_TOKEN"));return"http"!==t.substring(0,4)&&("/"!==t.substring(0,1)&&(o="/"+t),o=""+u.default.get("API_DOMAIN")+t),void 0!==c&&c&&(a.headers.authorization=c),fetch(o,a).then(function(t){return 401===t.status&&(r.StorageManager.delete(u.default.get("JWT_TOKEN")),void 0!==i&&i.dispatch({type:"REDIRECT",payload:" /auth/login"})),t.json()}).then(function(t){if(t.error)throw Error(t.error);if(t.redirect&&void 0!==i&&i.dispatch({type:"REDIRECT",payload:t.redirect}),t.token){var e=t.token.split(".")[1];e=e.replace("-","+").replace("_","/");var o=window&&window.atob?window.atob:n(4).decode;if(e=JSON.parse(decodeURIComponent(escape(o(e)))),!u.default.get("AUTHORIZED_USERS").includes(e.type))throw Error("Votre compte ne permet pas d'accéder à cet espace");r.StorageManager.set(u.default.get("JWT_TOKEN"),t.token),void 0!==i&&i.dispatch({type:"AUTH_TOKEN",payload:t.token})}return t})},this.get=function(t){var e={method:"GET",headers:{"Access-Control-Request-Method":"GET"}};return r.execute(t,e)},this.post=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={method:"POST",body:JSON.stringify(e),headers:{"Access-Control-Request-Method":"POST","Content-Type":"application/json"}};return r.execute(t,n)},this.put=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={method:"PUT",body:JSON.stringify(e),headers:{"Access-Control-Request-Method":"PUT","Content-Type":"application/json"}};return r.execute(t,n)},this.delete=function(t){var e={method:"DELETE",headers:{"Access-Control-Request-Method":"DELETE"}};return r.execute(t,e)},this.StorageManager=e},f=null;e.default={Instance:l,get:a().get,post:a().post,put:a().put,delete:a().delete}},function(t,e,n){"use strict";(function(t,r){var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i){var u="object"==a(e)&&e,c="object"==a(t)&&t&&t.exports==u&&t,s="object"==(void 0===r?"undefined":a(r))&&r;s.global!==s&&s.window!==s||(i=s);var l=function(t){this.message=t};l.prototype=new Error,l.prototype.name="InvalidCharacterError";var f=function(t){throw new l(t)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=/[\t\n\f\r ]/g,y=function(t){t=String(t).replace(p,"");var e=t.length;e%4==0&&(t=t.replace(/==?$/,""),e=t.length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&f("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,a="",i=-1;++i<e;)r=d.indexOf(t.charAt(i)),n=o%4?64*n+r:r,o++%4&&(a+=String.fromCharCode(255&n>>(-2*o&6)));return a},h=function(t){t=String(t),/[^\0-\xFF]/.test(t)&&f("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,o,a=t.length%3,i="",u=-1,c=t.length-a;++u<c;)e=t.charCodeAt(u)<<16,n=t.charCodeAt(++u)<<8,r=t.charCodeAt(++u),o=e+n+r,i+=d.charAt(o>>18&63)+d.charAt(o>>12&63)+d.charAt(o>>6&63)+d.charAt(63&o);return 2==a?(e=t.charCodeAt(u)<<8,n=t.charCodeAt(++u),o=e+n,i+=d.charAt(o>>10)+d.charAt(o>>4&63)+d.charAt(o<<2&63)+"="):1==a&&(o=t.charCodeAt(u),i+=d.charAt(o>>2)+d.charAt(o<<4&63)+"=="),i},g={encode:h,decode:y,version:"0.1.0"};if("object"==a(n(2))&&n(2))void 0!==(o=function(){return g}.call(e,n,e,t))&&(t.exports=o);else if(u&&!u.nodeType)if(c)c.exports=g;else for(var v in g)g.hasOwnProperty(v)&&(u[v]=g[v]);else i.base64=g}(void 0)}).call(e,n(5)(t),n(6))},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(){return v||(v=new g(p.default)),v}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=n(8),f=r(l),d=n(0),p=r(d),y=n(3),h=r(y),g=function t(e){var n=this;i(this,t),this.reset={deleted:void 0,updated:void 0,created:void 0},this.encodeGetUrl=function(t){var e=t.params,r=e.url,o=e.select,a=e.filter,i=e.populate,u=e.sort,c=e.query,s=t.pagination;s=void 0===s?{}:s;var l=s.itemsPerPage,f=void 0===l?null:l,d=s.currentIndex,p=void 0===d?null:d,y=r;return(o||a||i||u||p||f)&&(y=r+"?q"),o&&(y+=n.encode("select",o)),a&&(y+=n.encode("filter",a)),i&&(y+=n.encode("populate",i)),u&&(y+=n.encode("sort",u)),p&&(y+=n.encode("currentIndex",p)),f&&(y+=n.encode("itemsPerPage",f)),c&&(y+=c),y},this.init=function(t){var e=t.data,n=t.url,r=t.filter,o=t.select,a=t.populate,i=t.sort,u=t.itemsPerPage;return{loading:!1,error:!1,data:e||{},params:{url:n,filter:r,select:o,populate:a,sort:i},pagination:{currentIndex:1,itemsPerPage:u||25,totalPages:0,totalItems:0}}},this.setParams=function(t,e){return{data:e.data||t.data,params:s({},t.params,e),pagination:s({},t.pagination,e)}},this.encode=function(t,e){return"&"+t+"="+encodeURIComponent(JSON.stringify(e))},this.get=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=n.setParams(t.state[e],i),l=c.data,f=c.params,d=c.pagination,p={params:s({},f)};t.setState(a({},e,s({},n.reset,{params:f,data:l,pagination:d,loading:!0,error:!1}))),r?p.params.url=f.url+"/"+r:p.pagination=d,h.default.get(n.encodeGetUrl(p)).then(function(n){var r=n.data,i=o(n,["data"]);u&&u(r),t.setState(a({},e,s({},t.state[e],{loading:!1,data:r,pagination:i})))},function(n){t.setState(a({},e,s({},t.state[e],{loading:!1,error:n.message,data:l})))})},this.post=function(t,e,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.state[e].params.url;if(!i)throw new Error("Api.post need params.url on state object");t.setState(a({},e,s({},t.state[e],n.reset,{loading:!0,error:!1}))),h.default.post(i,r).then(function(n){var i=t.state[e].data;o&&(i=s({},i,n.data,r)),t.setState(a({},e,s({},t.state[e],{loading:!1,created:n.data._id,data:i})))},function(n){t.setState(a({},e,s({},t.state[e],{loading:!1,error:n.message})))})},this.put=function(t,e,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.setState(a({},e,s({},t.state[e],n.reset,{loading:!0,error:!1})));var i=r._id?t.state[e].params.url+"/"+r._id:t.state[e].params.url;h.default.put(i,r).then(function(n){var i=t.state[e].data;o&&(i=s({},i,n.data,r)),t.setState(a({},e,s({},t.state[e],{loading:!1,updated:!0,data:i})))},function(n){t.setState(a({},e,s({},t.state[e],{loading:!1,error:n.message})))})},this.delete=function(t,e,r){t.setState(a({},e,s({},t.state[e],n.reset,{loading:!0,error:!1})));var o=t.state[e].params.url;"string"==typeof r?o=o+"/"+r:"object"==(void 0===r?"undefined":c(r))&&(o=r._id?o+"/"+r._id:o+"?"+f.default.stringify(r)),h.default.delete(o).then(function(n){var r=s({},t.state[e].data,n.data);t.setState(a({},e,s({},t.state[e],{loading:!1,deleted:!0,data:r})))},function(n){t.setState(a({},e,s({},t.state[e],{loading:!1,error:n.message})))})},this.autocomplete=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.state[e].params.url+"?";o+=Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(n[t]))}).join("&"),h.default.get(o).then(function(n){t.setState(a({},e,s({},t.state[e],{data:n.data}))),r&&n.data.length>0?r(n.data[0]):r&&r({})},function(n){t.setState(a({},e,s({},t.state[e],{data:[]})))})},this.Requester=new h.default.Instance(e)},v=null;e.default={Instance:g,init:u().init,setParams:u().setParams,get:u().get,post:u().post,put:u().put,delete:u().delete,autocomplete:u().autocomplete}},function(t,e,n){"use strict";e.decode=e.parse=n(9),e.encode=e.stringify=n(10)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,a){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var u=/\+/g;t=t.split(e);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var s=t.length;c>0&&s>c&&(s=c);for(var l=0;l<s;++l){var f,d,p,y,h=t[l].replace(u,"%20"),g=h.indexOf(n);g>=0?(f=h.substr(0,g),d=h.substr(g+1)):(f=h,d=""),p=decodeURIComponent(f),y=decodeURIComponent(d),r(i,p)?o(i[p])?i[p].push(y):i[p]=[i[p],y]:i[p]=y}return i};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t){switch(void 0===t?"undefined":o(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,c){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":o(t))?r(u(t),function(o){var u=encodeURIComponent(a(o))+n;return i(t[o])?r(t[o],function(t){return u+encodeURIComponent(a(t))}).join(e):u+encodeURIComponent(a(t[o]))}).join(e):c?encodeURIComponent(a(c))+n+encodeURIComponent(a(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={set:function(t,e){return window.localStorage.setItem(t,"string"==typeof e?e:JSON.stringify(e))},get:function(t){return JSON.parse(window.localStorage.getItem(t))},delete:function(t){return window.localStorage.removeItem(t)}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(13),a=function(t){return t&&t.__esModule?t:{default:t}}(o),i={equals:function(t,e){return i.stringifyCircular(t)===i.stringifyCircular(e)},diff:function(t,e){return i.stringifyCircular(t)!==i.stringifyCircular(e)},stringifyCircular:function(t){return a.default.stringify(t)},removeChildsFromProps:function(t){var e=r({},t);return e.childrens&&delete e.childrens,e},shouldComponentUpdate:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a={},u={};return o.length>0?o.forEach(function(n){a[n]=e[n],u[n]=t.props[n]}):(a=r({},e),u=r({},t.props)),!i.equals(u,a)||!i.equals(t.state,n)}};e.default=i},function(t,e,n){"use strict";function r(t,e,n){var r,o,a=!1,i=!!e,u=[],c=[t],y=[t],h=[n?l:"[Circular]"],v=t,m=1;return i&&(o="object"===(void 0===e?"undefined":s(e))?function(t,n){return""!==t&&e.indexOf(t)<0?void 0:n}:e),function(t,e){return i&&(e=o.call(this,t,e)),a?(v!==this&&(r=m-g.call(c,this)-1,m-=r,c.splice(m,c.length),u.splice(m-1,u.length),v=this),"object"===(void 0===e?"undefined":s(e))&&e?(g.call(c,e)<0&&c.push(v=e),m=c.length,r=g.call(y,e),r<0?(r=y.push(e)-1,n?(u.push((""+t).replace(p,f)),h[r]=l+u.join(l)):h[r]=h[0]):e=h[r]):"string"==typeof e&&n&&(e=e.replace(f,d).replace(l,f))):a=!0,e}}function o(t,e){for(var n=0,r=e.length;n<r;t=t[e[n++].replace(y,l)]);return t}function a(t){return function(e,n){var r="string"==typeof n;return r&&n.charAt(0)===l?new v(n.slice(1)):(""===e&&(n=c(n,n,{})),r&&(n=n.replace(h,"$1"+l).replace(d,f)),t?t.call(this,e,n):n)}}function i(t,e,n){for(var r=0,o=e.length;r<o;r++)e[r]=c(t,e[r],n);return e}function u(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(e[r]=c(t,e[r],n));return e}function c(t,e,n){return e instanceof Array?i(t,e,n):e instanceof v?e.length?n.hasOwnProperty(e)?n[e]:n[e]=o(t,e.split(l)):t:e instanceof Object?u(t,e,n):e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l="~",f="\\x"+("0"+l.charCodeAt(0).toString(16)).slice(-2),d="\\"+f,p=new RegExp(f,"g"),y=new RegExp(d,"g"),h=new RegExp("(?:^|([^\\\\]))"+d),g=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},v=String,m={stringify:function(t,e,n,o){return m.parser.stringify(t,r(t,e,!o),n)},parse:function(t,e){return m.parser.parse(t,a(e))},parser:JSON};t.exports=m},,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ShallowEquals=e.Config=e.Requester=e.Api=e.Storage=e.Cookies=void 0;var o=n(0),a=r(o),i=n(11),u=r(i),c=n(7),s=r(c),l=n(3),f=r(l),d=n(1),p=r(d),y=n(12),h=r(y);e.Cookies=a.default,e.Storage=u.default,e.Api=s.default,e.Requester=f.default,e.Config=p.default,e.ShallowEquals=h.default}])});